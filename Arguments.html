

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Argument passing &mdash; Stroscot  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Delimited continuations" href="Delimited-Continuations.html" />
    <link rel="prev" title="Introduction" href="Introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Stroscot
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Argument passing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#keyword-arguments">Keyword arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#positional-arguments">Positional arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implicit-arguments">Implicit arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-types-of-arguments">Other types of arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#concatenative-arguments">Concatenative arguments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Delimited-Continuations.html">Delimited continuations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Optimal-Reduction.html">Optimal reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Syntax.html">Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="Overloading.html">Overloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="Types.html">Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="Memory.html">Memory management</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Stroscot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Argument passing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/Mathnerd314/stroscot/edit/master/docs/Arguments.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="argument-passing">
<h1>Argument passing<a class="headerlink" href="#argument-passing" title="Permalink to this headline">¶</a></h1>
<p>Stroscot supports many types of arguments. Functions are extremely common, so the more styles supported,
the shorter the code will be.</p>
<p>Modula-3 added keyword arguments and default arguments, to Modula-2. But I think they also added a misfeature: positional arguments with default values. In particular this interacts very poorly with currying.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span> <span class="n">a</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
<div class="section" id="keyword-arguments">
<h2>Keyword arguments<a class="headerlink" href="#keyword-arguments" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span> <span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">=</span> <span class="n">z</span> <span class="o">-</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span> <span class="o">*</span> <span class="n">w</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">foo</span> <span class="p">(</span><span class="n">y</span><span class="p">:</span><span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mi">4</span><span class="p">)</span> <span class="p">(</span><span class="n">w</span><span class="p">:</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">z</span><span class="p">:</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># 0-4/2*1</span>
<span class="n">v</span> <span class="o">==</span> <span class="n">foo</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="n">w</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="n">z</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
<span class="c1"># true</span>
</pre></div>
</div>
</div>
<div class="section" id="positional-arguments">
<h2>Positional arguments<a class="headerlink" href="#positional-arguments" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">==</span> <span class="n">foo</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">0</span>
<span class="c1"># true</span>
</pre></div>
</div>
<p>You can mix positional and keyword arguments freely; positions are
assigned to whatever is not a keyword argument.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">==</span> <span class="n">foo</span> <span class="p">{</span><span class="n">z</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span> <span class="p">{</span><span class="n">w</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span> <span class="mi">4</span> <span class="mi">2</span>
<span class="c1"># true</span>
</pre></div>
</div>
<p>Arguments are curried:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">+</span><span class="mi">10</span>
<span class="n">b</span> <span class="n">x</span> <span class="o">=</span> <span class="n">c</span>

<span class="n">b</span> <span class="mi">2</span> <span class="mi">1</span>
<span class="c1"># 11</span>
</pre></div>
</div>
</div>
<div class="section" id="implicit-arguments">
<h2>Implicit arguments<a class="headerlink" href="#implicit-arguments" title="Permalink to this headline">¶</a></h2>
<p>These behave similarly to arguments in languages with dynamical scoping.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bar</span> <span class="o">=</span> <span class="n">foo</span> <span class="o">+</span> <span class="mi">2</span>
<span class="n">baz</span> <span class="o">=</span> <span class="n">bar</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>

<span class="n">v</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">==</span> <span class="n">baz</span> <span class="p">{</span><span class="n">z</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="n">w</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>
<span class="c1"># true</span>
<span class="n">v</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">==</span> <span class="n">baz</span> <span class="mi">1</span> <span class="n">_</span> <span class="n">_</span> <span class="mi">0</span>
<span class="c1"># true</span>
</pre></div>
</div>
<p>Explicit argument passing cannot replace our implicit variable example,
because in general the author of the system cannot know what all the
parameters will be. Imagine that bar is part of the standard library, a
complex function. The variables x and y do not exist in the standard
library; it is part of the user’s code. To use explicit argument passing
would require adding a new argument to bar, but this would break anyone
else using the library. Not to mention that just one intervening
function is rare and we’d probably need to modify 20 or 30 functions in
a bad case.</p>
<p>A typical usage example is logging; the decision of whether to enable
logging is generally a flag defined close to the top level, but each use
site is scattered in the code. An implicit loglevel argument replaces
the global variable that is often used.</p>
<p>Using positional arguments inhibits passing positional arguments
implicitly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bar</span> <span class="o">=</span> <span class="n">foo</span> <span class="o">+</span> <span class="mi">2</span>
<span class="n">baz</span> <span class="n">a</span> <span class="o">=</span> <span class="n">bar</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span> <span class="o">-</span> <span class="n">a</span>

<span class="n">v</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">==</span> <span class="n">baz</span> <span class="mi">0</span> <span class="p">{</span><span class="n">z</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="n">w</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>
<span class="c1"># true</span>
<span class="n">v</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">==</span> <span class="n">baz</span> <span class="mi">1</span> <span class="n">_</span> <span class="n">_</span> <span class="mi">0</span>
<span class="c1"># Error: too many arguments to baz</span>
</pre></div>
</div>
<p>Similarly keyword arguments inhibit passing down that keyword
implicitly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="n">a</span>

<span class="n">b</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="c1"># Error: no definition for k given to a</span>
</pre></div>
</div>
<p>A proper definition for b would simply omit k:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="n">a</span>

<span class="n">b</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="c1"># 3</span>
</pre></div>
</div>
<p>For functions with no positional arguments, positions are assigned
implicitly left-to-right:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span> <span class="o">+</span> <span class="n">y</span>
<span class="n">a</span> <span class="mi">4</span> <span class="mi">1</span>
<span class="c1"># 5</span>
</pre></div>
</div>
<p>Atoms that are in lexical scope are not assigned positions, hence (/)
and (+) are not implicit positional arguments for a in the example
above. But they are implicit keyword arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span> <span class="o">+</span> <span class="n">y</span>
<span class="n">a</span> <span class="p">{(</span><span class="o">+</span><span class="p">):(</span><span class="o">-</span><span class="p">)}</span> <span class="mi">4</span> <span class="mi">1</span>
<span class="c1"># 4/1-1=3</span>
</pre></div>
</div>
<p>The namespace scoping mechanism protects against accidental use in large
projects.</p>
</div>
<div class="section" id="other-types-of-arguments">
<h2>Other types of arguments<a class="headerlink" href="#other-types-of-arguments" title="Permalink to this headline">¶</a></h2>
<p>Default arguments, output arguments, and variadic arguments are
supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>a {k:1} = k + 1
a # 2

b = out {a:3}; 2
b + a
# 5

c = sum $arguments
c 1 2 3
# 6
c *([1 2])
# 3
</pre></div>
</div>
<p>Implicit arguments are preferred to default arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span> <span class="o">=</span> <span class="n">k</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">b</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="n">c</span> <span class="c1"># 2</span>
</pre></div>
</div>
</div>
<div class="section" id="concatenative-arguments">
<h2>Concatenative arguments<a class="headerlink" href="#concatenative-arguments" title="Permalink to this headline">¶</a></h2>
<p>Results not assigned to a variable are pushed to a stack:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>

<span class="o">%</span><span class="n">stack</span>
<span class="c1"># 1 2 3</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">%</span></code> is the most recent result, with <code class="docutils literal notranslate"><span class="pre">%2</span></code> <code class="docutils literal notranslate"><span class="pre">%3</span></code> etc. referring to
less recent results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">}</span>
<span class="n">extend</span> <span class="o">%</span> <span class="p">{</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">}</span>
<span class="n">extend</span> <span class="o">%</span> <span class="p">{</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">}</span>
<span class="n">shuffle</span>
</pre></div>
</div>
<p>These stack arguments are used for positional arguments when not
supplied.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Delimited-Continuations.html" class="btn btn-neutral float-right" title="Delimited continuations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2020 Mathnerd314

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>