<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Values &mdash; Stroscot  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/hexagon_favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Library" href="Library.html" />
    <link rel="prev" title="Syntax" href="Syntax.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/hexagon_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted/index.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HowTo/index.html">How to</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Logic.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="Syntax.html">Syntax</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#symbols">Symbols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ordinary">Ordinary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extended">Extended</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qualified">Qualified</a></li>
<li class="toctree-l4"><a class="reference internal" href="#namespacing">Namespacing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#term">Term</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#infinite-terms">Infinite terms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#numbers">Numbers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#integers">Integers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rationals">Rationals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reals">Reals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#p-adics-and-surreals">p-adics and surreals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#number-formats">Number formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#complex">Complex</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lists">Lists</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tuple">Tuple</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arrays">Arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tensors">Tensors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#binary-data">Binary data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#strings">Strings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#characters">Characters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#date-time">Date/time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#records">Records</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#maps">Maps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multimap">Multimap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sets">Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bags">Bags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#priority-queue">Priority queue</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lambdas">Lambdas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modules">Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rewriting-system">Rewriting system</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pointers">Pointers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#references">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-structures">Data Structures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Library.html">Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="Fexprs.html">Metaprogramming</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="Dispatch.html">Dispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="Memory.html">Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="BuildSystem.html">Build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="Errors.html">Errors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Commentary/index.html">Commentary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzreferences.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Stroscot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Language Reference</a></li>
      <li class="breadcrumb-item active">Values</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/Mathnerd314/stroscot/edit/master/docs/Reference/Values.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="values">
<h1>Values<a class="headerlink" href="#values" title="Permalink to this heading"></a></h1>
<p>In Stroscot values are defined to be expressions that are in normal form (strongly reduced), i.e. they evaluate to themselves. WHNF is not sufficient to ensure a value, e.g. <code class="docutils literal notranslate"><span class="pre">[1,undefined]</span></code> reduces to <code class="docutils literal notranslate"><span class="pre">undefined</span></code> hence is not a value. Traditionally a function is only defined on values, but lazy evaluation allows functions to produce useful behavior for non-values as well.</p>
<p>Values are immutable (as <a class="reference external" href="https://github.com/matthiasn/talk-transcripts/blob/master/Hickey_Rich/PersistentDataStructure/00.11.36.jpg">Rich Hickey says</a>) and have notions of equality, hashing, literal syntax, and deconstruction. In terms of memory management values can be copied freely, and discarded if they are no longer needed.</p>
<p>For convenience, “value” really describes the equivalence class of expressions that reduce to a value. In particular here we describes values by their concise syntactic form. These syntactic forms typically are reducible terms, rather than normal forms - they reduce to a value of the compiler’s preferred data structure implementation. Programs may define the syntax here to other values.</p>
<section id="symbols">
<h2>Symbols<a class="headerlink" href="#symbols" title="Permalink to this heading"></a></h2>
<p>Symbols or identifiers are unique values. Bare symbols can be either ordinary or extended, vaguely like <a class="reference external" href="https://docs.raku.org/language/syntax#Identifiers">Raku</a>. However symbols defined in modules are qualified to that module, hence more specific.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">symbol</span><span class="w"></span>
<span class="nf">underscore_symbol</span><span class="w"></span>
<span class="nf">unícσdє</span><span class="o">-</span><span class="n">symβol</span><span class="w"></span>
<span class="p">(</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="o">@</span><span class="s">&quot;a long symbol&quot;</span><span class="w"></span>
</pre></div>
</div>
<section id="ordinary">
<h3>Ordinary<a class="headerlink" href="#ordinary" title="Permalink to this heading"></a></h3>
<p>An ordinary identifier matches the pattern <code class="docutils literal notranslate"><span class="pre">alphanum</span> <span class="pre">(alphanum|((apostrophe|hyphen)alphanum))*</span></code>, i.e. a sequence of digits/letters/underscores and isolated/embedded apostrophes or hyphens.</p>
<p>“Alphabetic” means Unicode General Category value Letter (L), and the underscore _. “Numeric” includes characters with the Unicode General Categories value Number and Decimal Digit (Nd).</p>
<p>Case is significant, thus <code class="docutils literal notranslate"><span class="pre">foo</span></code>, <code class="docutils literal notranslate"><span class="pre">Foo</span></code>, and <code class="docutils literal notranslate"><span class="pre">FOO</span></code> are distinct identifiers.</p>
</section>
<section id="extended">
<h3>Extended<a class="headerlink" href="#extended" title="Permalink to this heading"></a></h3>
<p>Extended symbols use an escape sequence to allow more freedom. They have the form <code class="docutils literal notranslate"><span class="pre">&#64;&quot;sym</span> <span class="pre">str&quot;</span></code> (from Zig), which allows spaces etc. following the syntax for a string. An extended symbol matches a corresponding ordinary symbol if that form exists, i.e. <code class="docutils literal notranslate"><span class="pre">null</span> <span class="pre">==</span> <span class="pre">&#64;&quot;null&quot;</span></code>.</p>
<p>In addition parsing rules for operator symbols may be suppressed with parentheses. For example <code class="docutils literal notranslate"><span class="pre">(+)</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">&#64;&quot;+&quot;</span></code>. There is also the empty parentheses symbol <code class="docutils literal notranslate"><span class="pre">()</span></code>, called “unit”.</p>
</section>
<section id="qualified">
<h3>Qualified<a class="headerlink" href="#qualified" title="Permalink to this heading"></a></h3>
<p>A qualified symbol is a bare symbol together with a module reference. A literal looks like <code class="docutils literal notranslate"><span class="pre">qsym</span> <span class="pre">&lt;module&gt;</span> <span class="pre">sym123</span></code>. Normally you use the period operator <code class="docutils literal notranslate"><span class="pre">.</span></code> and write <code class="docutils literal notranslate"><span class="pre">module.sym</span></code>, but the period operator is a function not a constructor.</p>
<p>Examples of qualified symbols include the predefined symbols of the prelude, like <code class="docutils literal notranslate"><span class="pre">null</span></code>, <code class="docutils literal notranslate"><span class="pre">true</span></code>, and <code class="docutils literal notranslate"><span class="pre">false</span></code> - the latter two forming the boolean type.</p>
<p>It is key to support side-by-side execution of multiple versions of the same functionality. So the module part of a qualified name includes a version number and a cryptographic hash.</p>
</section>
<section id="namespacing">
<h3>Namespacing<a class="headerlink" href="#namespacing" title="Permalink to this heading"></a></h3>
<p>Identifiers can be qualified by periods: <code class="docutils literal notranslate"><span class="pre">a.b.c</span></code>. <code class="docutils literal notranslate"><span class="pre">.</span></code> is an infix left-associative operator that binds tighter than juxtaposition. This gets resolved to a nondeterministic set of qualified names.</p>
</section>
</section>
<section id="term">
<h2>Term<a class="headerlink" href="#term" title="Permalink to this heading"></a></h2>
<p>A term is a symbol applied to other values.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">tree</span><span class="w"> </span><span class="p">(</span><span class="n">combine</span><span class="w"> </span><span class="p">(</span><span class="n">leaf</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">leaf</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"></span>
<span class="p">(</span><span class="o">++++</span><span class="p">)</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"></span>
<span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">some</span><span class="w"> </span><span class="p">(</span><span class="n">weird</span><span class="w"> </span><span class="n">thing</span><span class="p">))</span><span class="w"> </span><span class="mi">12</span><span class="w"></span>
</pre></div>
</div>
<p>Note that if there is an appropriate syntax rule the second example could also be written as <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">++++</span> <span class="pre">b</span></code>, but it would be an equivalent value.</p>
<p>Terms subsume algebraic data types, since an ADT value is a symbol applied to other values. An ADT is a “free” term that has no reduction rules defined.</p>
<p>Terms also include the other function syntax, keyword arguments and so on.</p>
<section id="infinite-terms">
<h3>Infinite terms<a class="headerlink" href="#infinite-terms" title="Permalink to this heading"></a></h3>
<p>Sometimes it is useful to deal with terms that are solutions to a system of equations, like <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">x=cons</span> <span class="pre">1</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">x</span></code>. These are also values. For terms with no reduction rules, there is a way to compute the (unique) minimal graph representation, where loops in the graph represent infinite cyclic repetitions. There are also infinitely reducible terms, e.g. <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">fib</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">cons</span> <span class="pre">x</span> <span class="pre">(fib</span> <span class="pre">y</span> <span class="pre">(x+y))</span> <span class="pre">in</span> <span class="pre">fib</span> <span class="pre">0</span> <span class="pre">1</span></code> requires infinitely many reductions to reduce to an infinite normal form.</p>
</section>
</section>
<section id="numbers">
<h2>Numbers<a class="headerlink" href="#numbers" title="Permalink to this heading"></a></h2>
<p>In the mathematical world the definition of <a class="reference external" href="https://en.wikipedia.org/wiki/Number#Main_classification">number</a> variously refers to integers, rationals, real numbers, complex numbers, and/or other mathematical structures like p-adics or the surreal numbers. (the “numeric tower”) But in the computer world most of these are composite structures and the primitive notion of “number” is a literal that looks like a number.</p>
<section id="integers">
<h3>Integers<a class="headerlink" href="#integers" title="Permalink to this heading"></a></h3>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="mi">4711</span><span class="w"></span>
<span class="mi">4711</span><span class="kt">L</span><span class="w"></span>
<span class="mf">1.2e+3</span><span class="w"></span>

<span class="nf">base</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="p">]</span><span class="w"></span>
<span class="nf">digit</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="n">a</span><span class="o">-</span><span class="n">fA</span><span class="o">-</span><span class="kt">F_</span><span class="p">]</span><span class="w"></span>
<span class="nf">pos_exponent</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="kt">Z</span><span class="p">]</span><span class="w"> </span><span class="o">+?</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="n">_</span><span class="p">]</span><span class="o">+</span><span class="w"></span>
<span class="nf">format</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="kt">Z</span><span class="p">]</span><span class="w"> </span><span class="n">identifier</span><span class="w"></span>

<span class="nf">integer</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">base</span><span class="o">?</span><span class="w"> </span><span class="n">digit</span><span class="o">+</span><span class="w"> </span><span class="n">pos_exponent</span><span class="o">?</span><span class="w"> </span><span class="n">format</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Really integers are just a special class of symbols. Different bases for integers are provided - decimal <code class="docutils literal notranslate"><span class="pre">1000</span></code>, hexadecimal <code class="docutils literal notranslate"><span class="pre">0x3e8</span></code>, octal <code class="docutils literal notranslate"><span class="pre">0o1750</span></code>, binary <code class="docutils literal notranslate"><span class="pre">0b1111101000</span></code>. Further bases may be added. Positive exponents with decimal (e) / hexadecimal (p) / binary (b) / user-defined are allowed.</p>
<p>Leadings 0’s are significant - literals with leading zeros must be stored in a type that can hold the digits all replaced with their highest value, e.g. <code class="docutils literal notranslate"><span class="pre">0001</span></code> cannot be stored in a <code class="docutils literal notranslate"><span class="pre">i8</span></code> (type must be able to contain <code class="docutils literal notranslate"><span class="pre">9999</span></code>). The old mistake of parsing leading <code class="docutils literal notranslate"><span class="pre">0</span></code> as octal is completely ignored. On the other hand trailing 0’s are not significant - the decimal point should never be the last character in numeric literals (e.g. 1. is invalid, and must be written as 1 or 1.0).</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Decimal_separator#Digit_grouping">Wikipedia</a> lists the following commonly used digit grouping delimiters:</p>
<ul class="simple">
<li><p>comma “,”</p></li>
<li><p>dot “.”</p></li>
<li><p>thin space ” “</p></li>
<li><p>space ” “</p></li>
<li><p>underscore “_”</p></li>
<li><p>apostrophe «’».</p></li>
</ul>
<p>Traditionally, English-speaking countries employ commas, and other European countries employ dots. This causes ambiguity as <code class="docutils literal notranslate"><span class="pre">1.000</span></code> could either be <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">1000</span></code> depending on country. To resolve this ambiguity, various standards organizations have advocated the thin space in groups of three since 1948, using a regular word space or no delimiter if not available. However these are already in use in programming languages as list separator, radix point, and token separator.</p>
<p>Hence underscore and apostrophe have been used in PLs instead. Simon of <a class="reference external" href="https://github.com/core-lang/core/issues/52">Core</a> says quote is more readable. Underscore is also used in identifiers, which can confuse as to whether a symbol is an identifier or a numeric literal. But the underscore is the natural ASCII replacement for a space. 13+ languages have settled on underscore, <a class="reference external" href="https://softwareengineering.stackexchange.com/questions/403931/which-was-the-first-language-to-allow-underscore-in-numeric-literals">following</a> Ada that was released circa 1983. Only C++14, Rebol, and Red use the “Swiss” apostrophe/single quote instead.</p>
<p>C++14 chose quote to solve an ambiguity in whether the <code class="docutils literal notranslate"><span class="pre">_db</span></code> in <code class="docutils literal notranslate"><span class="pre">0xdead_beef_db</span></code> is a user-defined format or additional hexadecimal digits, by making it <code class="docutils literal notranslate"><span class="pre">0xdead'beef_db</span></code>. This could have been solved in the parser by specifying that the last group parses as a format if defined and digits otherwise, or parses as digits and requires <code class="docutils literal notranslate"><span class="pre">__db</span></code> to specify a format. But overall I think Stroscot doesn’t need user-defined format suffixes; the prefix style <code class="docutils literal notranslate"><span class="pre">i16</span> <span class="pre">0xdead_beef</span></code> is just fine.</p>
<p>Rebol uses comma/period for decimal point so quote was a logical choice. There doesn’t seem to be any reason underscore couldn’t have been used. Red is just a successor of Rebol and copied many choices.</p>
</section>
<section id="rationals">
<h3>Rationals<a class="headerlink" href="#rationals" title="Permalink to this heading"></a></h3>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">exponent</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="kt">Z</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="o">+-</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="n">_</span><span class="p">]</span><span class="o">+</span><span class="w"></span>
<span class="nf">float</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">base</span><span class="o">?</span><span class="w"> </span><span class="n">digit</span><span class="o">+</span><span class="p">(</span><span class="o">\.</span><span class="n">digit</span><span class="o">+</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="n">exponent</span><span class="o">?</span><span class="w"> </span><span class="n">format</span><span class="o">?</span><span class="w"></span>

<span class="nf">rational</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">float</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">float</span><span class="w"> </span><span class="sc">&#39;/&#39;</span><span class="w"> </span><span class="n">float</span><span class="w"></span>
</pre></div>
</div>
<p>Number syntax is <a class="reference external" href="https://docs.swift.org/swift-book/ReferenceManual/LexicalStructure.html#grammar_numeric-literal">Swift’s</a>, but liberalized. We allow exponential notation in the numerator/denominator because writing out <code class="docutils literal notranslate"><span class="pre">1e99</span> <span class="pre">/</span> <span class="pre">1e-99</span></code> would be tedious.</p>
<p>The normal form of a rational is <code class="docutils literal notranslate"><span class="pre">AeB</span> <span class="pre">/</span> <span class="pre">C</span></code> where <code class="docutils literal notranslate"><span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code> are relatively prime integers, <code class="docutils literal notranslate"><span class="pre">B</span></code> is an integer, and <code class="docutils literal notranslate"><span class="pre">C</span></code> is an integer that is not zero and not divisible by 10.</p>
<p>So the value a rational is a term with a nested term, <code class="docutils literal notranslate"><span class="pre">(/)</span> <span class="pre">((e)</span> <span class="pre">&lt;int&gt;</span> <span class="pre">&lt;int&gt;)</span> <span class="pre">&lt;int&gt;</span></code>.</p>
</section>
<section id="reals">
<h3>Reals<a class="headerlink" href="#reals" title="Permalink to this heading"></a></h3>
<p>The real numbers and numeric spaces containing it are uncomputably large. In practice only a subset of  (computable) values is accessible. Generally we take the integers and rationals and consider the closure under operations:
* constants (e, pi)
* arithmetic ops (addition, subtraction multiplication, division)
* other ops (sqrt, pow, sin, cos, abs, find root of polynomial in interval, definite integral, etc.)</p>
<p>These operations can be written out as terms, e.g. <code class="docutils literal notranslate"><span class="pre">sin</span> <span class="pre">(7/2)</span></code>, so to support the real numbers only appropriate symbols and defined operations are needed.</p>
</section>
<section id="p-adics-and-surreals">
<h3>p-adics and surreals<a class="headerlink" href="#p-adics-and-surreals" title="Permalink to this heading"></a></h3>
<p>p-adics and surreal numbers are also represented using terms composed of integers, rationals, constants, and other terms, representing operations.</p>
</section>
<section id="number-formats">
<h3>Number formats<a class="headerlink" href="#number-formats" title="Permalink to this heading"></a></h3>
<p>Numbers can have a suffix interpreted as the format. This expand to a term that specifies the format by applying it, e.g.  <code class="docutils literal notranslate"><span class="pre">123i8</span></code> expands to <code class="docutils literal notranslate"><span class="pre">int8</span> <span class="pre">123</span></code>. Formats include IEE 754 float/double, signed and unsigned fixed bit-width integers, and fixed-point rationals.</p>
</section>
<section id="complex">
<h3>Complex<a class="headerlink" href="#complex" title="Permalink to this heading"></a></h3>
<p>These are just a term <code class="docutils literal notranslate"><span class="pre">complex</span> <span class="pre">a</span> <span class="pre">b</span></code> representing <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b*i</span></code> where <code class="docutils literal notranslate"><span class="pre">a,b</span></code> are real numbers. Maybe it is also worth having <code class="docutils literal notranslate"><span class="pre">complex_polar</span> <span class="pre">r</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">r*exp</span> <span class="pre">(i*t)</span></code>.</p>
</section>
</section>
<section id="lists">
<h2>Lists<a class="headerlink" href="#lists" title="Permalink to this heading"></a></h2>
<p>A list represents an ordered sequence of values that is empty or finite, but not infinite (only terms can be infinite).</p>
<p>Basic list syntax is the usual syntactic sugar for list values.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">[]</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">list</span><span class="w"></span>
<span class="nf">arr</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">arr</span></code> translates to a Lisp-like term <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">c</span></code>, making use of the term syntax’s capability to take variadic arguments. Heterogeneous lists are possible, <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">1</span> <span class="pre">&quot;x&quot;</span> <span class="pre">(int32</span> <span class="pre">3)</span></code>.</p>
<p>Haskell’s cons operator is abandoned in favor of concatenation:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">xs</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">ys</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">concatenation</span><span class="w"></span>
<span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="p">``</span><span class="n">x</span><span class="p">``</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="p">``</span><span class="n">xs</span><span class="p">``,</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">cons</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">++</span></code> is just a symbol, so you can write <code class="docutils literal notranslate"><span class="pre">[1]</span> <span class="pre">++</span> <span class="pre">2</span></code> for example, i.e. the term <code class="docutils literal notranslate"><span class="pre">(++)</span> <span class="pre">(list</span> <span class="pre">1)</span> <span class="pre">2</span></code>.</p>
<p>A list has push and pop operations from head and tail so can be used as a stack, queue, or double-ended queue (dequeue).</p>
<section id="tuple">
<h3>Tuple<a class="headerlink" href="#tuple" title="Permalink to this heading"></a></h3>
<p>In Stroscot tuple is synonymous with list - they’re both immutable. There’s not a different type with different semantics like in Python or Pure. You can use the tuple syntax <code class="docutils literal notranslate"><span class="pre">(a,b)</span></code> in place of list syntax <code class="docutils literal notranslate"><span class="pre">[a,b]</span></code> whenever convenient.</p>
</section>
<section id="arrays">
<h3>Arrays<a class="headerlink" href="#arrays" title="Permalink to this heading"></a></h3>
<p>(Immutable) arrays are lists together with an indexing scheme. The indexing scheme specifies the length of the list and how index values map to integer indexes of the list. For example <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">(range_inclusive</span> <span class="pre">1</span> <span class="pre">3)</span> <span class="pre">[1,2,3]</span></code> defines a 1-based array where <code class="docutils literal notranslate"><span class="pre">arr[i]</span> <span class="pre">=</span> <span class="pre">i</span></code>. Maybe there is also an element type, <code class="docutils literal notranslate"><span class="pre">typed_array</span> <span class="pre">int32</span> <span class="pre">(range_inclusive</span> <span class="pre">1</span> <span class="pre">3)</span> <span class="pre">[1,2,3]</span></code></p>
<p>Mutable arrays are a reference pointing to an immutable array. Operations are optimized by the memory system, so it does in-place operations where possible but can still resize the array. Conceptually you are doing <code class="docutils literal notranslate"><span class="pre">(read</span> <span class="pre">arr)[0]</span></code> to get the first element, i.e. taking an immutable snapshot and then reading/modifying it. This is hidden normally because <code class="docutils literal notranslate"><span class="pre">arr[0]</span></code> and <code class="docutils literal notranslate"><span class="pre">arr[0]</span> <span class="pre">:=</span> <span class="pre">1</span></code> are overloaded to read/write mutable arrays.</p>
<p>There is also an array of mutable cells (bytes), similar to C pointers / arrays. You can do something like <code class="docutils literal notranslate"><span class="pre">readOffset</span> <span class="pre">Int</span> <span class="pre">0</span> <span class="pre">ptr</span></code>. You can read a different type than you wrote, and it doesn’t have to be aligned (although aligned accesses may be faster depending on architecture). This type is useful for low-level munging but mutable arrays are probably safer.</p>
</section>
<section id="tensors">
<h3>Tensors<a class="headerlink" href="#tensors" title="Permalink to this heading"></a></h3>
<p>Tensors are just nested lists, e.g. here is a (3,2,5)-sized rank 3 tensor:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="p">[[[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">]],</span><span class="w"></span>
<span class="w"> </span><span class="p">[[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">]],</span><span class="w"></span>
<span class="w"> </span><span class="p">[[</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="mi">24</span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="mi">29</span><span class="p">]]]</span><span class="w"></span>
</pre></div>
</div>
<p>If you want to save a bit of bracket typing you can use <code class="docutils literal notranslate"><span class="pre">reshape</span></code> on a flat list:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">reshape</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="mi">29</span><span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p>Or similarly use a 3D array:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">array</span><span class="w"> </span><span class="p">(</span><span class="n">range</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">...</span><span class="p">,</span><span class="mi">29</span><span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p>There is also a <code class="docutils literal notranslate"><span class="pre">matrix</span></code> DSL which turns semicolons into rows.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">matrix</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span><span class="w"></span>
<span class="o">#</span><span class="w"> </span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]]</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="binary-data">
<h2>Binary data<a class="headerlink" href="#binary-data" title="Permalink to this heading"></a></h2>
<p>Most data in a computer simply sits in storage and has no easily accessible interpretation. It is simply a sequence of bits. As such Stroscot provides binary data values.</p>
<p>Another way to write data is as a string <code class="docutils literal notranslate"><span class="pre">bits</span> <span class="pre">&quot;abcd\x0F&quot;</span></code> which makes use of UTF-8 characters and</p>
<p>The normal form is just a term applied to a list of bits, <code class="docutils literal notranslate"><span class="pre">bits</span> <span class="pre">[1,0,1]</span></code>. Because of the term tagging it, the list can be stored compactly.</p>
</section>
<section id="strings">
<h2>Strings<a class="headerlink" href="#strings" title="Permalink to this heading"></a></h2>
<p>A string is a sequence of bytes of a given length. Subtypes include null-terminated strings like C and UTF-8 encoded strings.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;Hello world!\n&quot;
``Hello user ${id}``
[Enclosed text]
&#39;string&#39;
&quot;&quot;&quot; multiline
string&quot;&quot;&quot;
</pre></div>
</div>
<p>Double and single quotes are both supported, as well as a multi-line syntax.
Escape sequences are defined:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>\newline Backslash and newline ignored
\\ Backslash (\)
\&#39; Single quote (&#39;)
\&quot; Double quote (&quot;)

\a ASCII Bell (BEL)
\b ASCII Backspace (BS)
\f ASCII Formfeed (FF)
\n ASCII Linefeed (LF)
\r ASCII Carriage Return (CR)
\t ASCII Horizontal Tab (TAB)
\v ASCII Vertical Tab (VT)

\0 null byte
\ooo Byte with octal value ooo
\xhh Byte with hex value hh
\N{name} Codepoint with name, abbreviation or alias &#39;name&#39; in the Unicode database
\nnnn Codepoint with decimal value nnnn. The maximum value of a codepoint is 1114111.
\uxxxx Codepoint with hex value xxxx. The maximum value is hexadecimal 10ffff.
\&amp; Backslash and ampersand ignored. The purpose of this escape sequence is to make it possible to write a numeric escape followed immediately by a regular ASCII digit.
\^[@A-Z[\\]^_] caret control code notation (does anyone use?)
</pre></div>
</div>
<p>There is also a binary/hex literal syntax to abbreviate <code class="docutils literal notranslate"><span class="pre">\xAA\xBB\xCC</span></code> as <code class="docutils literal notranslate"><span class="pre">0xAABBCC</span></code>: We allow various base prefixes - <code class="docutils literal notranslate"><span class="pre">0x</span></code> (hexadecimal), <code class="docutils literal notranslate"><span class="pre">0o</span></code> (octal), <code class="docutils literal notranslate"><span class="pre">0d</span></code> (decimal) and <code class="docutils literal notranslate"><span class="pre">0b</span></code> (binary). The decimal base expands to the shortest binary string that can contain that decimal. So for example <code class="docutils literal notranslate"><span class="pre">0d6</span> <span class="pre">=</span> <span class="pre">0b110</span> <span class="pre">=</span> <span class="pre">bits</span> <span class="pre">[1,1,0]</span></code>.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">base</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="p">]</span><span class="w"></span>
<span class="nf">digit</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="n">a</span><span class="o">-</span><span class="n">fA</span><span class="o">-</span><span class="kt">F_</span><span class="p">]</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">digit</span><span class="o">+</span><span class="w"></span>
</pre></div>
</div>
<p>String concatenation is <code class="docutils literal notranslate"><span class="pre">++</span></code>.</p>
<section id="characters">
<h3>Characters<a class="headerlink" href="#characters" title="Permalink to this heading"></a></h3>
<p>There is no explicit syntax for characters, instead a character is a Unicode string containing exactly one grapheme cluster. Unicode provides an algorithm for identifying grapheme clusters in UAX #29. The main notable feature of the algorithm is that a grapheme cluster / character is not just a single Unicode code point and may be arbitrarily long due to the use of combining characters/accents and ZWJs. For example, “G” + grave-accent is a character represented by two Unicode code points, and emojis similarly have lots of code points, as does Zalgo text. Hence a character is in general an arbitrary length sequence of codepoints and it is simplest and most correct to define a character as a type of string.</p>
</section>
</section>
<section id="date-time">
<h2>Date/time<a class="headerlink" href="#date-time" title="Permalink to this heading"></a></h2>
<p>Date/time values are written using symbols applied to strings, lists, or records using ISO 8601 style formats, e.g. <code class="docutils literal notranslate"><span class="pre">instant</span> <span class="pre">&quot;2011-12-03T10:15:30.999999999Z&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">gregorianDate</span> <span class="pre">[2010,12,03]</span></code>, or <code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">{</span> <span class="pre">hour</span> <span class="pre">=</span> <span class="pre">10,</span> <span class="pre">minute</span> <span class="pre">=</span> <span class="pre">10,</span> <span class="pre">second</span> <span class="pre">=</span> <span class="pre">12.3</span> <span class="pre">}</span></code>. This hides all internal representation details. Internally there is a more compact form, e.g. a 128-bit number.</p>
</section>
<section id="records">
<h2>Records<a class="headerlink" href="#records" title="Permalink to this heading"></a></h2>
<p>Records are like C structs or Python dictionaries. The order of the fields is remembered, so this data type is a list of key-value pairs.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">rec</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w"></span>
<span class="nf">rec</span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="nf">rec</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="p">{</span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">x</span><span class="p">}</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="p">{</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">}</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="o">#</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="n">update</span><span class="w"></span>
<span class="nf">rec</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="p">{</span><span class="n">b</span><span class="ow">=</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">4</span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="o">#</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">5</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Once you get to four values, it is best to make a record with named entries instead of using a tuple.</p>
<section id="maps">
<h3>Maps<a class="headerlink" href="#maps" title="Permalink to this heading"></a></h3>
<p>Maps are the same as records except the fields are not ordered (set of pairs).</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">map</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="multimap">
<h3>Multimap<a class="headerlink" href="#multimap" title="Permalink to this heading"></a></h3>
<p>A multimap is a map where the values are nonempty bags.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">multimap</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w"></span>
<span class="c1">-- same as</span><span class="w"></span>
<span class="nf">map</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">bag</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">bag</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">bag</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="sets">
<h2>Sets<a class="headerlink" href="#sets" title="Permalink to this heading"></a></h2>
<p>Sets are the mathematical definition, i.e. a function <code class="docutils literal notranslate"><span class="pre">isElemOf</span> <span class="pre">:</span> <span class="pre">Any</span> <span class="pre">-&gt;</span> <span class="pre">{Present|Absent}</span></code>. They may be specified by logical formulas. Finite sets may be specified as lists with no repeated values, similar to a map whose values are all the symbol <code class="docutils literal notranslate"><span class="pre">Present</span></code>.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">universalSet</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">(</span><span class="nf">\</span><span class="kr">_</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Present</span><span class="p">)</span><span class="w"></span>
<span class="nf">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="w"></span>
<span class="c1">-- equivalent to</span><span class="w"></span>
<span class="nf">b</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Present</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Present</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Present</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="nf">a</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">(</span><span class="nf">\</span><span class="n">x</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="n">lookup</span><span class="w"> </span><span class="p">{</span><span class="kr">default</span><span class="ow">=</span><span class="kt">Absent</span><span class="p">}</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>More notation for sets is discussed on the <span class="xref std std-ref">Sets</span> page.</p>
</section>
<section id="bags">
<h2>Bags<a class="headerlink" href="#bags" title="Permalink to this heading"></a></h2>
<p>Bags are unordered multisets, similar to a map whose values are nonnegative integers.</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="nf">bag</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<section id="priority-queue">
<h3>Priority queue<a class="headerlink" href="#priority-queue" title="Permalink to this heading"></a></h3>
<p>This is a bag plus an ordering operation.</p>
</section>
</section>
<section id="lambdas">
<h2>Lambdas<a class="headerlink" href="#lambdas" title="Permalink to this heading"></a></h2>
<p>Lambdas are first-class and hence values. Equality is determined by alpha beta eta equality (i.e., beta reduce to normal form, eta reduce, and compare modulo alpha equivalence).</p>
</section>
<section id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this heading"></a></h2>
<p>Modules are also first class, they are discussed in their own page.</p>
</section>
<section id="rewriting-system">
<h2>Rewriting system<a class="headerlink" href="#rewriting-system" title="Permalink to this heading"></a></h2>
<p>A rewriting system consists of a set of rewrite rules. They are defined over a fixed abstract rewriting system called the “substitution calculus” consisting of the proofs from Stroscot’s core logic, where reduction is cut elimination. Free variables etc. are incorporated by extending the <code class="docutils literal notranslate"><span class="pre">Use</span></code> rule. Terms are representatives of equivalence classes of proofs under <code class="docutils literal notranslate"><span class="pre">&lt;-&gt;*</span></code> of the substitution calculus. Contexts are similarly representatives of precontexts.</p>
<p>A (conditional) rewrite rule has the form <code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">-&gt;</span> <span class="pre">r</span> <span class="pre">|</span> <span class="pre">C1,</span> <span class="pre">...,</span> <span class="pre">Cn</span></code> where <code class="docutils literal notranslate"><span class="pre">l</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span></code> are both terms. The conditions take the form of predicates <code class="docutils literal notranslate"><span class="pre">Pi(x1,</span> <span class="pre">...,</span> <span class="pre">xm,</span> <span class="pre">-&gt;)</span></code>, where the <code class="docutils literal notranslate"><span class="pre">xi</span></code> are the free variables of <code class="docutils literal notranslate"><span class="pre">l</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span></code>, and <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> is the rewrite relation of the system. An unconditional rewrite rule <code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">-&gt;</span> <span class="pre">r</span></code> is one where the conditions <code class="docutils literal notranslate"><span class="pre">Ci</span></code> are always true. Example predicates are:</p>
<ul class="simple">
<li><p>type predicates, term must be of a certain form</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a</span></code> joins with, rewrites to, or is convertible to <code class="docutils literal notranslate"><span class="pre">b</span></code></p></li>
</ul>
<p>A term <code class="docutils literal notranslate"><span class="pre">M</span></code> rewrites to a term <code class="docutils literal notranslate"><span class="pre">N</span></code> by a rewrite rule <code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">-&gt;</span> <span class="pre">r</span> <span class="pre">|</span> <span class="pre">Ci</span></code> if, for some context <code class="docutils literal notranslate"><span class="pre">C</span></code> with one hole, and substitution <code class="docutils literal notranslate"><span class="pre">σ</span></code>, the propositions <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">&lt;-&gt;*</span> <span class="pre">C[l</span> <span class="pre">/.</span> <span class="pre">σ]</span></code>, <code class="docutils literal notranslate"><span class="pre">C[r</span> <span class="pre">/.</span> <span class="pre">σ]</span> <span class="pre">&lt;-&gt;*</span> <span class="pre">N</span></code>, and <code class="docutils literal notranslate"><span class="pre">Ci</span> <span class="pre">/.</span> <span class="pre">σ</span></code> all hold, where <code class="docutils literal notranslate"><span class="pre">C[l]</span></code> means <code class="docutils literal notranslate"><span class="pre">C</span></code> with the hole substituted by <code class="docutils literal notranslate"><span class="pre">l</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;-&gt;*</span></code> is the relation of the substitution calculus.</p>
</section>
<section id="pointers">
<h2>Pointers<a class="headerlink" href="#pointers" title="Permalink to this heading"></a></h2>
<p>Pointers are just a wrapper for particular bit patterns (integers), like <code class="docutils literal notranslate"><span class="pre">pointer</span> <span class="pre">0xdeadbeef</span></code>. You can do integer arithmetic and turn it into a pointer, but at least on x86-64 not all 64-bit integers are valid pointers.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading"></a></h2>
<p>References are like pointers but use symbols instead of integers, we’ll go with <code class="docutils literal notranslate"><span class="pre">Ref</span> <span class="pre">r123</span></code> for syntax where <code class="docutils literal notranslate"><span class="pre">r123</span></code> is a symbol. The main difference from a pointer is that you can’t do arithmetic on symbols. Most symbols are autogenerated inside the reference creation operation <code class="docutils literal notranslate"><span class="pre">ref</span></code>, but you can also write reference values directly. This is mainly for convenience in debugging at the REPL, since fixed symbols are tantamount to global variables and hence are bad programming practice.</p>
<p>Postfix ++ and – are statements</p>
</section>
<section id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this heading"></a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Arrays
    Array
    Bit array
    Bit field
    Bitboard
    Bitmap
    Circular buffer
    Control table
    Image
    Dope vector
    Dynamic array
    Gap buffer
    Hashed array tree
    Lookup table
    Matrix
    Parallel array
    Sorted array
    Sparse matrix
    Iliffe vector
    Variable-length array

Lists

    Singly/Circular/Doubly Linked list
    Array list
    Association list
    Self-organizing list
    Skip list
    Unrolled linked list
    VList
    Conc-tree list
    Xor linked list
    Zipper
    Doubly connected edge list also known as half-edge
    Difference list
    Free list

Trees
  Binary trees
    AA tree
    AVL tree
    Binary search tree
    Binary tree
    Cartesian tree
    Conc-tree list
    Left-child right-sibling binary tree
    Order statistic tree
    Pagoda
    Randomized binary search tree
    Red–black tree
    Rope
    Scapegoat tree
    Self-balancing binary search tree
    Splay tree
    T-tree
    Tango tree
    Threaded binary tree
    Top tree
    Treap
    WAVL tree
    Weight-balanced tree
  B-trees
    B-tree
    B+ tree
    B*-tree
    Dancing tree
    2–3 tree
    2–3–4 tree
    Queap
    Fusion tree
    Bx-tree
  Heaps
    Heap
    Binary heap
    B-heap
    Weak heap
    Binomial heap
    Fibonacci heap
    AF-heap
    Leonardo heap
    2–3 heap
    Soft heap
    Pairing heap
    Leftist heap
    Treap
    Beap
    Skew heap
    Ternary heap
    D-ary heap
    Brodal queue
  Bit-slice trees - each tree node compares a bit slice of key values.
    Radix tree (compressed trie), Patricia tree
    Bitwise trie with bitmap
    Suffix tree
    Suffix array
    Compressed suffix array
    FM-index
    Generalised suffix tree
    B-tree
    Judy array
    X-fast trie
    Y-fast trie
    Merkle tree
  Multi-way trees
    Ternary tree
    K-ary tree
    And–or tree
    (a,b)-tree
    Link/cut tree
    SPQR-tree
    Spaghetti stack
    Disjoint-set data structure (Union-find data structure)
    Fusion tree
    Enfilade
    Exponential tree
    Fenwick tree
    Van Emde Boas tree
    Rose tree
  Space-partitioning trees
    Segment tree
    Interval tree
    Range tree
    Bin
    K-d tree
    Implicit k-d tree
    Min/max k-d tree
    Relaxed k-d tree
    Adaptive k-d tree
    Quadtree
    Octree
    Linear octree
    Z-order
    UB-tree
    R-tree
    R+ tree
    R* tree
    Hilbert R-tree
    X-tree
    Metric tree
    Cover tree
    M-tree
    VP-tree
    BK-tree
    Bounding interval hierarchy
    Bounding volume hierarchy
    BSP tree
    Rapidly exploring random tree
  Application-specific trees
    Abstract syntax tree
    Parse tree
    Decision tree
    Alternating decision tree
    Minimax tree
    Expectiminimax tree
    Finger tree
    Expression tree
    Log-structured merge-tree

Hash-based structures

    Bloom filter
    Count–min sketch
    Distributed hash table
    Double hashing
    Dynamic perfect hash table
    Hash array mapped trie
    Hash list
    Hash table
    Hash tree
    Hash trie
    Koorde
    Prefix hash tree
    Rolling hash
    MinHash
    Quotient filter
    Ctrie

Graphs
    Graph
    Adjacency list
    Adjacency matrix
    Graph-structured stack
    Scene graph
    Decision tree
        Binary decision diagram
    Zero-suppressed decision diagram
    And-inverter graph
    Directed graph
    Directed acyclic graph
    Propositional directed acyclic graph
    Multigraph
    Hypergraph

Other

    Lightmap
    Winged edge
    Quad-edge
    Routing table
    Symbol table
    Piece table
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Syntax.html" class="btn btn-neutral float-left" title="Syntax" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Library.html" class="btn btn-neutral float-right" title="Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022 Mathnerd314.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>